# RandomX
*06/05/19*  
_**Monero и Arweave собираются провести валидацию алгоритма доказательства работы​.**_

Какой год на дворе? Кажется, ещё вчера слышались разговоры о том, что блокчейн анонимной монеты никогда не обрезать и ASIC в конце концов победят. И что мы видим? Блокчейн вот-вот будет обрезан, и мы на пороге запуска RandomX, который ожидаем, надев свои космические гермошлемы. RandomX ещё предстоит пройти испытания и доказать свою состоятельность, но это один из восхитительных этапов конвейера Monero. Здесь мы расскажем вам о природе алгоритма, о связанных с ним планах, а также об источниках дополнительной информации.

## _Что такое RandomX?_

RandomX — это новый алгоритм доказательства работы (PoW), который проект Monero планирует реализовать в рамках следующего обновления сети. RandomX разработан с целью противодействия ASIC-майнингу и использует случайный код и технологии привязки к памяти, которые не допустят доминирования специализированных аппаратных средств в сети. Поскольку RandomX оптимизирован для использования с обычными потребительскими CPU, сеть станет более децентрализованной и эгалитарной с точки зрения распределения вознаграждений за блоки.

Говард Чу (hyc) расскажет о RandomX на [Monero Konferenco](https://monerokon.com/), а уже сейчас вы можете заглянуть в [репозиторий RandomX на GitHub](https://github.com/tevador/RandomX) и получить дополнительную информацию. На момент написания этой заметки процесс аудита RandomX уже был начат. В нём принимают участие [Trail Of Bits](https://www.trailofbits.com/), [X41](https://www.x41-dsec.de/), [Quarkslab](https://www.quarkslab.com/en/) и [Kudelski Group](https://www.nagra.com/). Реализация рабочего варианта RandomX планируется вместе со следующим обновлением сети Monero.

## _Что изменится?​_

ASIC-устройства являются основной жертвой RandomX, но так как алгоритм оптимизирован под CPU, GPU не испытают того же повышения хешрейта. Ранние [Nvidia (CUDA) benchmarks](https://github.com/SChernykh/RandomX_CUDA) показали, что хешрейт повышается на 100‒150%, и ожидается, что этот показатель повысится в результате дальнейшей оптимизации. Ведётся работа по адаптации под AMD GPU (OpenCL). Поскольку алгоритм RandomX привязан к памяти, ожидается, что объём майнинга с применением ботнетов и вредоносного программного обеспечения снизится, так как администраторам будет гораздо проще заметить увеличение потребления памяти. Общее снижение хешрейта в сети повысит размер вознаграждения за блок, стимулируя майнеров, использующие CPU или GPU.

RandomX будет работать в двух режимах с различными требованиями к памяти и производительности. «Быстрый режим» (Fast Mode) потребует 2 Гб совместно используемой памяти, при этом производительность будет в 4‒6 раз выше, чем в «Лёгком режиме» (Light Mode), требующем всего 256 Мб ОЗУ. «Быстрый режим» (Fast Mode) предназначен для выделенных майнеров. Лёгкий режим позволит полным узлам производить валидацию блоков, не требуя при этом 2+ Гб ОЗУ, поэтому малые устройства (подобные одноплатным ARM компьютерам, Rock64, например) по-прежнему можно будет использовать в качестве автономных узлов.

| CPU | ОС | Кол-во потоков | ОЗУ | CryptoNight-R (v8) | RandomX (быстрый режим) | RandomX (лёгкий режим) |
|--|--|--|--|--|--|--|
| AMD Ryzen 7 1700 | Ubuntu 16.04 | 8 | 16 Гб DDR4 | 650 H/s | 4100 H/s | 620 H/s |
| Intel Core i7-8550U | Windows 10 | 4 | 16 Гб DDR4 | 240 H/s | 1700 H/s | 350 H/s |
| Intel Core i3-3220 | Ubuntu 16.04 | 4 | 4 Гб DDR3 | 75 H/s | 510 H/s | 150 H/s |  

| GPU | Тактовая частота | CryptoNight-R (v8) | RandomX |
|--|--|--|--|
| GTX 1660 Ti | 2070/13760 МГц | 626 H/s (98 Вт) | 660 H/s (103 Вт) |
| GTX 1080 Ti | 1930/10010 МГц | 787 H/s (145 Вт) | 1136 H/s (190 Вт) |  

## _Сотрудничество по RandomX​_

В работе над алгоритмом RandomX для Monero приняли участие разработчики tevador, hyc, vielmetti, antanst и SChernykh. И уже другие организации проявляют к нему интерес. [Arweave](https://www.arweave.org/), компания, предоставляющая услуги бессерверного хранения, профинансировала аудит, который будет проведён Trail of Bits для сообщества Monero. Также Arweave собираются реализовать RandomX для собственных нужд ещё до того, как это будет сделано Проектом Monero. Arweave предлагает инновационный «криптовалютный» подход к децентрализованному и долгосрочному хранению данных. Майнинг на Arweave опирается как на доказательство работы (proof of work), так и на новую уникальную для Arweave концепцию доказательства доступа (proof of access). Эта концепция стимулирует майнеры Arweave производить репликацию и получать быстрый доступ к данным, которые хранятся в сети.

[Wownero](http://wownero.org/) также реализует алгоритм RandomX в рамках грядущего обновления до версии v0.6, которая получит название RandomWOW. Код RandomX будет обновлён после прохождения аудита, так что ко времени реализации октябрьского форка Monero в коде будут наблюдаться некоторые расхождения с версией, которую реализует Wownero. Ещё одно отличие будет состоять в том, что RandomWOW будет использовать меньше временной памяти для хеширования, 1 Мб вместо 2 Мб, меньшее количество итераций выполнения VM, а также повышенное количество связанных выполнений VM на хеш с целью снижения стоимости компиляции программы для GPU.
